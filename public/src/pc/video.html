<!DOCTYPE html>
<html>

<head>
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    <title>觅技发布技能后台</title>
    <link rel="stylesheet" type="text/css" href="/css/iview.css">
    <link rel="stylesheet" type="text/css" href="/css/wangEditor.min.css">
    <link rel="stylesheet" type="text/css" href="../css/pc-pic.css">
    <link rel="stylesheet" href="/css/style.css" type="text/css" />
    <script type="text/javascript" src="/js/vue.min.js"></script>
    <script type="text/javascript" src="/js/iview.min.js"></script>
    <script type="text/javascript" src="/js/jquery.min.js"></script>
    <script type="text/javascript" src="/js/cropbox.js"></script>
    <script src="https://cdn.jsdelivr.net/vue.resource/1.2.1/vue-resource.min.js"></script>
    <script type="text/javascript" src="../js/pc_islogin.js"></script>
</head>
<style>
    .ivu-message .ivu-icon {
        margin-right: 8px;
        font-size: 44px;
        top: 1px;
        vertical-align: middle;
        position: relative;
    }
    
    .ivu-message-notice-content {
        border: 1px solid #ccc;
    }
    
    .ivu-slider {
        width: 96%;
    }
    
    .ivu-slider-bar {
        background: #ff5f00 !important;
    }
    
    .ivu-slider-button {
        border: 2px solid #ff5f00 !important;
    }
    
    .wangEditor-menu-container .menu-group {
        border: none;
    }
    
    .ivu-progress-text {
        margin-left: 0 !important;
    }
    
    .dashed {
        border: none !important;
    }
    
    .menu-tip {
        display: none !important;
    }
    
    input::-webkit-input-placeholder {
        color: #9b9b9b;
    }
</style>

<body>
    <div id="app">
        <div id="menu">
            <iframe src="menu.html" class="menu_frame"></iframe>
        </div>
        <div id="content">
            <ul class="nav">
                <li>
                    <a href="pic.html">
                        <p>图文技能</p>
                    </a>
                </li>
                <li class="nav_act">
                    <a href="video.html">
                        <p>视频技能</p>
                    </a>
                </li>
                <li>
                    <a href="activity.html">
                        <p>发布活动</p>
                    </a>
                </li>
            </ul>
            <div class="wrapper">
                <div class="main">
                    <div class="info">
                        <div class="left">
                            <p class="url_tl">为技能加个封面吧</p>
                            <p class="url_pro">封面图是显示在主页的缩略图</p>
                            <div v-bind:class="{ dashed: isdashed }" style="width: 167px;height:122px;line-height: 120px;font-size: 30px;border:2px dashed  #ccc;float:left;margin-left: 40%;text-align: center;cursor: pointer;"
                                @click="modal = true">
                                <p v-if="isActive1 == true">+</p>
                                <img v-bind:src=imgurl class="showimg" v-if="isActive == true" v-bind:class="{ display: isActive }">
                            </div>
                        </div>
                        <Modal :visible.sync="modal" title="编辑封面" width="500" ok-text="确定" :style="{top: '50px'}" :mask-closable="false" @on-ok="keep"
                            @on-cancel="cancel">
                            <div class="top" v-bind:class="{ display: modal }">
                                <p class="title">1.上传封面图</p>
                                <p class="filename title">{{filename}}</p>
                                <input type="file" v-model="filename" class="file" id="file" accept="image/png,image/jpg,image/jpeg" />
                                <button class="oncover" @click="onfile">选择封面</button>
                                <p class="cover_ti">*仅限JPG、PNG格式图片*</p>
                            </div>
                            <div class="bottom" v-bind:class="{ display: modal }">
                                <p class="title">2.裁剪封面</p>
                                <p class="cover_ti" style="margin-top: 5px;">*鼠标滚轮可放大缩小图片*</p>
                                <div class="imageBox">
                                    <div class="thumbBox"></div>
                                    <div class="spinner" style="display: none">Loading...</div>
                                </div>
                            </div>
                        </Modal>
                        <div class="right">
                            <div class="pop" v-if="showcatgoy == true" style="display:block">
                                <div class="catgoy" v-if="showcatgoy == true" v-bind:class="{ display: showcatgoy }">
                                    <p>请为技能选择一个分类</p>
                                    <ul>
                                        <li class="catgoylist" v-for="catgoy in catgoylist" @click="catlist(catgoy.name,catgoy.id,$index)">
                                            <p>{{catgoy.name}}</p>
                                        </li>
                                    </ul>
                                    <button class="catgoy_in" @click="catgoy_in">确认</button>
                                </div>
                            </div>
                            <div class="skill">
                                <div class="cat_show">
                                    <p class="catgoy_tl">分类</p>
                                    <button class="open_catgoy" @click="show" v-html="catgoyname" v-bind:class="{ ok_catgoy: ok_catgoy }"></button>
                                    <img src="/img/arrow.png" class="arrow" />
                                </div>
                                <div class="charge_show">
                                    <p class="catgoy_tl">教程收费</p>
                                    <span class="switch" v-bind:class="{ switch_act: switch }" @click="onswitch(false)"></span>
                                    <div v-if="switch == true" class="money_box" v-bind:class="{ display: switch }">
                                        <p class="money_head">免费部分</p>
                                        <Slider v-model="sildval" :tip-format="format" @on-input="onsild"></Slider>
                                        <label class="money_tl">%</label><input type="text" placeholder="0" class="time"
                                            v-model="sildval"><label class="time_tl">免费部分为自一开始至</label>
                                    </div>
                                    <div v-if="switch == true" class="money_box money_box1" v-bind:class="{ display: switch }">
                                        <p class="money_head">教程价格</p>
                                        <label class="money_tl">元</label><input type="text" placeholder="0" class="money"
                                            v-model="money">
                                        <!--<span class="money_pro">注：100个技能币等于￥1</span>-->
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                    <div class="box"></div>
                    <div class="upvideo">
                        <p class="videotitle">技能视频</p>
                        <Progress :percent="percent"></Progress>
                        <button class="upv" @click="upvideo" v-html="upv"></button>
                        <form id="uploadForm" enctype="multipart/form-data">
                            <input type="file" v-model="videoname" style="display: none;" class="videofile" name="Filedata" />
                            <input type="hidden" name="writetoken" value="65df5114-0aad-4b27-ad4d-2e60ee4e973f" class="writetoken">
                            <input type="hidden" name="JSONRPC" value='{"title": "用户视频", "tag":"video","desc":"视频"}' class="jsonrpc">
                        </form>
                        <p class="videoname">{{videoname}}</p>
                        <p class="videotl">上传视频大小不能超过1G，无格式限制</p>
                    </div>
                    <div class="box"></div>
                    <div class="text">
                        <input type="text" class="skill_title" v-model="skill_title" placeholder="请输入技能标题" maxlength="25">
                        <div id="free" style="min-height: 470px;" @focus="free_f"></div>

                    </div>
                    <button class="preview" @click="preview">预览</button>
                </div>
            </div>
        </div>
        <div class="pop" v-if="onpreview == true" v-bind:class="{ display: onpreview }">
            <div style="display: inline-block;position: relative;padding-top:10px;">
                <div class="seeframe">
                    <img src="/img/low.png" style="width:100%;" class="low" />
                    <img src="/img/pre_video.png" style="width:100%;" class="low" />
                    <p class="seetl" v-html="skill_title"></p>
                    <div id="header">
                        <div class="left">
                            <img v-bind:src=u_headurl class="seeheadurl" />
                            <p class="name" v-html="name"></p>
                            <p class="time" v-html="time"></p>
                        </div>
                    </div>

                    <div class="seefree" v-html="seefree">

                    </div>
                </div>
            </div>

            <div class="seebox">
                <p class="see_title">首页预览</p>
                <img src="/img/pre_title.png" class="seehome" />
                <div class="skilldata">
                    <ul>
                        <li>
                            <p class="title" v-html=skill_title>1231231231</p>
                            <img v-bind:src=imgurl class="title_url" />
                            <div>
                                <img src="/img/comment_2.png" class="imgurl" />
                                <span>999</span>
                                <img src="/img/favour_2.png" class="imgurl" />
                                <span>999</span>
                            </div>
                        </li>
                    </ul>
                </div>
                <p class="seecatgoy">技能分类<span v-html="catgoyname"></span></p>
                <button class="release" @click="release">发布</button>
                <button class="seelook" @click="look">再想想</button>
            </div>
        </div>
    </div>
    <script type="text/javascript" src="/js/wangEditor.js"></script>
    <script src="/js/jquery.form.js"></script>
    <script type="text/javascript" src="../js/pc_pic.js"></script>
</body>

</html>